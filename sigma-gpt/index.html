<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link href="tailwind.css" rel="stylesheet" />
    <title>σ-GPTs - Examples</title>
  </head>
  <body class="container mx-auto">
    <h1 class="text-4xl font-bold text-center my-8">
      σ-GPTs - Examples
    </h1>
    <!-- Twitter Button -->
    <div class="text-center">
      <a href="https://x.com/ArnaudPannatier/status/1799055129829839166">
        <button type="button" class="text-white bg-[#050708] hover:bg-[#050708]/80 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg px-5 py-2.5 text-center inline-flex items-center justify-center w-32 mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0,0,256,256" style="fill:#000000; margin-right: 8px;">
            <g fill="#ffffff" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal">
            <g transform="scale(8.53333,8.53333)">
              <path d="M26.37,26l-8.795,-12.822l0.015,0.012l7.93,-9.19h-2.65l-6.46,7.48l-5.13,-7.48h-6.95l8.211,11.971l-0.001,-0.001l-8.66,10.03h2.65l7.182,-8.322l5.708,8.322zM10.23,6l12.34,18h-2.1l-12.35,-18z"></path>
            </g>
          </g>
        </svg>
        Thread 
      </button>
    </a>
    <a href="https://arxiv.org/abs/2404.09562">
      <button type="button" class="text-white bg-[#B31B1B] hover:bg-[#B31B1B]/80 focus:ring-4 focus:outline-none focus:ring-[#B31B1B]/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center justify-center w-32 mb-2">
        <svg id="primary_logo" data-name="primary logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 246.978 111.119" width="30" height="30" style="fill:#ffffff; margin-right: 8px;">
          <path d="M427.571,255.154c1.859,0,3.1,1.24,3.985,3.453,1.062-2.213,2.568-3.453,4.694-3.453h14.878a4.062,4.062,0,0,1,4.074,4.074v7.828c0,2.656-1.327,4.074-4.074,4.074-2.656,0-4.074-1.418-4.074-4.074V263.3H436.515a2.411,2.411,0,0,0-2.656,2.745v27.188h10.007c2.658,0,4.074,1.329,4.074,4.074s-1.416,4.074-4.074,4.074h-26.39c-2.659,0-3.986-1.328-3.986-4.074s1.327-4.074,3.986-4.074h8.236V263.3h-7.263c-2.656,0-3.985-1.329-3.985-4.074,0-2.658,1.329-4.074,3.985-4.074Z" transform="translate(-358.165 -222.27)" fill="#ffffff"/>
          <path d="M539.233,255.154c2.656,0,4.074,1.416,4.074,4.074v34.007h10.1c2.746,0,4.074,1.329,4.074,4.074s-1.328,4.074-4.074,4.074H524.8c-2.656,0-4.074-1.328-4.074-4.074s1.418-4.074,4.074-4.074h10.362V263.3h-8.533c-2.744,0-4.073-1.329-4.073-4.074,0-2.658,1.329-4.074,4.073-4.074Zm4.22-17.615a5.859,5.859,0,1,1-5.819-5.819A5.9,5.9,0,0,1,543.453,237.539Z" transform="translate(-358.165 -222.27)" fill="#ffffff"/>
          <path d="M605.143,259.228a4.589,4.589,0,0,1-.267,1.594L590,298.9a3.722,3.722,0,0,1-3.721,2.48h-5.933a3.689,3.689,0,0,1-3.808-2.48l-15.055-38.081a3.23,3.23,0,0,1-.355-1.594,4.084,4.084,0,0,1,4.164-4.074,3.8,3.8,0,0,1,3.718,2.656l14.348,36.134,13.9-36.134a3.8,3.8,0,0,1,3.72-2.656A4.084,4.084,0,0,1,605.143,259.228Z" transform="translate(-358.165 -222.27)" fill="#ffffff"/>
          <path d="M486.149,277.877l-32.741,38.852c-1.286,1.372-2.084,3.777-1.365,5.5a4.705,4.705,0,0,0,4.4,2.914,4.191,4.191,0,0,0,3.16-1.563l40.191-42.714a4.417,4.417,0,0,0,.042-6.042Z" transform="translate(-358.165 -222.27)" fill="#ffffff"/>
          <path d="M486.149,277.877l31.187-38.268c1.492-1.989,2.2-3.03,1.492-4.723a5.142,5.142,0,0,0-4.481-3.161h0a4.024,4.024,0,0,0-3.008,1.108L472.711,274.6a4.769,4.769,0,0,0,.015,6.53L520.512,332.2a3.913,3.913,0,0,0,3.137,1.192,4.394,4.394,0,0,0,4.027-2.818c.719-1.727-.076-3.438-1.4-5.23l-40.124-47.464" transform="translate(-358.165 -222.27)" fill="#ffffff"/>
          <path d="M499.833,274.828,453.169,224.4s-1.713-2.08-3.524-2.124a4.607,4.607,0,0,0-4.338,2.788c-.705,1.692-.2,2.88,1.349,5.1l40.093,48.422" transform="translate(-358.165 -222.27)" fill="#ffffff"/>
          <path d="M390.61,255.154c5.018,0,8.206,3.312,8.206,8.4v37.831H363.308a4.813,4.813,0,0,1-5.143-4.929V283.427a8.256,8.256,0,0,1,7-8.148l25.507-3.572v-8.4H362.306a4.014,4.014,0,0,1-4.141-4.074c0-2.87,2.143-4.074,4.355-4.074Zm.059,38.081V279.942l-24.354,3.4v9.9Z" transform="translate(-358.165 -222.27)" fill="#ffffff"/>
        </svg>
      </button>
    </a>
      <a href="  https://github.com/idiap/sigma-gpt">
        <button type="button" class="text-white bg-[#333333] hover:bg-[#333333]/80 focus:ring-4 focus:outline-none focus:ring-[#333333]/50 font-medium rounded-lg px-5 py-2.5 text-center inline-flex items-center justify-center w-32 mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="30" height="30" style="fill:#ffffff; margin-right: 8px;">
            <path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.438 9.8 8.205 11.387.6.11.793-.26.793-.577v-2.022c-3.338.726-4.043-1.416-4.043-1.416-.546-1.387-1.333-1.757-1.333-1.757-1.09-.746.082-.73.082-.73 1.205.084 1.84 1.236 1.84 1.236 1.07 1.833 2.807 1.303 3.492.997.108-.774.42-1.303.763-1.602-2.665-.305-5.467-1.334-5.467-5.934 0-1.312.467-2.384 1.236-3.224-.124-.303-.535-1.53.117-3.188 0 0 1.01-.322 3.303 1.23.957-.266 1.984-.398 3.004-.403 1.02.005 2.047.137 3.004.403 2.293-1.553 3.303-1.23 3.303-1.23.652 1.658.242 2.885.118 3.188.77.84 1.236 1.912 1.236 3.224 0 4.61-2.805 5.624-5.475 5.921.43.372.823 1.104.823 2.226v3.293c0 .32.192.694.801.576C20.565 21.8 24 17.3 24 12c0-6.63-5.37-12-12-12z"></path>
          </svg>
          GitHub
        </button>
      </a>
    </div>




  <!-- <p class="font-bold text-center">
  <br>
    I'm on the job market. <br> If you are looking for a machine learning engineer who knows about attention models <br><br>
    <a class="px-4 w-24 py-2 ml-2 bg-[#050708] text-white font-bold rounded" href="mailto:arn.pannatier@gmail.com?subject=Looking%20for%20a%20data%20scientist%20at%20%5Bxxx%5D&body=Hey%20Arnaud%2C%0A%0A">contact me at arn.pannatier@gmail.com</a>
  </p> -->


    <section>
      <h2 class="text-2xl font-bold my-4">Text</h2>
      Here we showcase how generating sequence with σ-GPT and GPT looks like.
      Note that the results are prerecorded for the sake of this demonstration
      and no actual generation is happening here.
      <br />
      We use the same model, once with rejection sampling, once generating in a
      random order, and once generating sequences causally.
      <br />
      We did not cherry picked the results (all 3 corresponds to seed 0).
      <br />
      Theses sequences are recorded, the steps for rejection sampling are played again with an interval of 250ms, the other two with an interval of 50ms.
      <article id="txt" x-data="displayGPT('rejection', 250)">
        <h3 class="text-xl font-bold text-justify my-4">
          σ-GPT with rejection sampling
        </h3>
        <span x-text="`${currentIndex + 1}/${txts.length}`"></span>
        <code
          x-text="currentText"
          class="text-xs block bg-slate-100 p-5 font-mono text-justify"
        ></code>
        <br />
        <button
          @click="restartInterval"
          class="px-4 w-24 py-2 bg-blue-500 text-white font-bold rounded"
        >
          Restart
        </button>
        <button
          @click="stopInterval"
          class="px-4 w-24 py-2 ml-2 bg-red-500 text-white font-bold rounded"
        >
          Stop
        </button>
      </article>
      <article id="txt" x-data="displayGPT('random', 50)">
        <h3 class="text-xl font-bold my-4">σ-GPT</h3>
        <span x-text="`${currentIndex + 1}/${txts.length}`"></span>
        <code
          x-text="currentText"
          class="text-xs block bg-slate-100 p-5"
        ></code>
        <br />
        <button
          @click="restartInterval"
          class="px-4 w-24 py-2 bg-blue-500 text-white font-bold rounded"
        >
          Restart
        </button>
        <button
          @click="stopInterval"
          class="px-4 w-24 py-2 ml-2 bg-red-500 text-white font-bold rounded"
        >
          Stop
        </button>
      </article>
      <article id="txt" x-data="displayGPT('causal', 50)">
        <h3 class="text-xl font-bold my-4">GPT</h3>
        <span x-text="`${currentIndex + 1}/${txts.length}`"></span>
        <code
          x-text="currentText"
          class="text-xs block bg-slate-100 p-5"
        ></code>
        <br />
        <button
          @click="restartInterval"
          class="px-4 w-24 py-2 bg-blue-500 text-white font-bold rounded"
        >
          Restart
        </button>
        <button
          @click="stopInterval"
          class="px-4 w-24 py-2 ml-2 bg-red-500 text-white font-bold rounded"
        >
          Stop
        </button>
      </article>
      <article id="txt" x-data="displayGPT('bst', 50)">
        <h3 class="text-xl font-bold my-4">Fractal GPT</h3>
        <span x-text="`${currentIndex + 1}/${txts.length}`"></span>
        <code
          x-text="currentText"
          class="text-xs block bg-slate-100 p-5"
        ></code>
        <br />
        <button
          @click="restartInterval"
          class="px-4 w-24 py-2 bg-blue-500 text-white font-bold rounded"
        >
          Restart
        </button>
        <button
          @click="stopInterval"
          class="px-4 w-24 py-2 ml-2 bg-red-500 text-white font-bold rounded"
        >
          Stop
        </button>
      </article>
    </section>
    <section>
      <h2 class="text-2xl font-bold my-4">Path-Solving</h2>
      Here we showcase how σ-GPT can be used to solve path-finding problems. In
      particular how rejection sampling allow to finish some samples first, and
      then can continue to solve the rest of the samples.
      <br>
      Red indicates a wrong path, white a valid completed path.
      

      <div class="grid grid-cols-2 gap-4">
        <div class="w-full my-4 text-center">
          
        <h3>σ-GPT Rejection Sampling</h3>        
        <img
          src="output.gif"
          class="w-full"

          alt="Path-Solving"
          style="
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
          "
        />
      </div>
      <div class="my-4 text-center">
          
        <h3>Diffusion</h3>        
        <img
          src="mazes_loop.gif"
          alt="Path-Solving"
          class="w-full"
          style="
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
          "
        />
      </div>

    </div>
    </section>

    <section>
      <h2 class="text-2xl font-bold my-4">Vertical Rate Prediction</h2>
      Same for vertical rate prediction.

      <br>
      Here a black border indicates a completed sequence.
      
      <div class="grid grid-cols-2 gap-4">
        <div class="w-full my-4 text-center">
          
        <h3>σ-GPT Rejection Sampling</h3>        
        <img
          src="climbingrate.gif"
          class="w-full"
          alt="Vertical Rate Prediction"
        />

      </div>

      <div class="my-4 text-center">
          
        <h3>Diffusion</h3>        
        <img
          src="diffusion.gif"
          alt="Vertical Rate Prediction"
          class="w-full"
        />
      
      
    </section>
  </body>
  <script src="recordings.js"></script>
  <script src="https://unpkg.com/alpinejs" defer></script>
  <script>
    function displayGPT(key, time) {
      return {
        txts: [],
        currentIndex: 0,
        currentText: "Loading txts...",
        intervalId: null,
        stopped: false,
        init() {
            console.log("Init");
            console.log(key);

            text = txt[key];      
            // filter and pad with space to the max length
            this.txts = text.filter((line) => line.trim() !== "");
            max_length = Math.max(...this.txts.map((x) => x.length));
            console.log(max_length);
            this.txts = this.txts.map((x) => x.padEnd(max_length));
            lengths = this.txts.map((x) => x.length);
            console.log(lengths);
            this.startInterval();
        },
        startInterval() {
          console.log("Start");
          this.intervalId = setInterval(() => {
            if (this.currentIndex >= this.txts.length - 1) {
              clearInterval(this.intervalId);
              this.currentText = this.txts[this.currentIndex];
            } else {
              this.currentIndex += 1;
              this.currentText = this.txts[this.currentIndex];
            }
          }, time);
        },
        restartInterval() {
          clearInterval(this.intervalId);
          if (this.stopped) {
            this.stopped = false;
          } else {
            this.currentIndex = 0;
          }
          this.startInterval();
        },
        stopInterval() {
          console.log(this.intervalId);
          console.log("Stop");
          clearInterval(this.intervalId);
          this.stopped = true;
          // this.currentText = 'Interval stopped.';
        },
      };
    }
  </script>
</html>
